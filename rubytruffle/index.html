<!DOCTYPE html>
<html>

<head>

<meta charset="utf-8">
<title>JRuby+Truffle</title>

<!--[if lt IE 9]>
<script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
<![endif]-->

<meta name="viewport" content="initial-scale=1.0">

<link rel="stylesheet" href="http://cdn.jsdelivr.net/normalize/2.1.0/normalize.css">

<link rel="stylesheet" href="http://fonts.googleapis.com/css?family=Open+Sans:400,300">
<link rel="stylesheet" href="http://fonts.googleapis.com/css?family=Inconsolata">
<link rel="stylesheet" href="http://netdna.bootstrapcdn.com/font-awesome/3.0.2/css/font-awesome.css">

<link rel="stylesheet" href="../common.css">
<link rel="stylesheet" href="../article.css">

</head>

<body>

<article>

<header>
<h1>JRuby+Truffle</h1>
<img alt="Ruby Logo (Copyright (c) 2006, Yukihiro Matsumoto. Licensed
under the terms of Creative Commons Attribution-ShareAlike 2.5.)" src="ruby.png" width="96" height="96">
<img alt="JRuby Logo (Copyright (c) 2011, Tony Price. Licensed
under the terms of Creative Commons Attribution-NoDerivs 3.0 Unported (CC BY-ND 3.0))." src="jruby.png" width="96" height="96">
</header>

<p>JRuby+Truffle started as my internship project at <a href="http://labs.oracle.com/">Oracle Labs</a> in early 2013. It is an implementation of the <a href="https://www.ruby-lang.org/">Ruby</a> programming language on the JVM, using the <a href="http://openjdk.java.net/projects/graal/">Graal dynamic compiler and the Truffle AST interpreter framework</a>. JRuby+Truffle can achieve peak performance well beyond that possible in JRuby at the same time as being a significantly simpler system. In early 2014 it was open sourced and integrated into <a href="http://jruby.org/">JRuby</a>.</p>
<p>This page links to the literature and code related to the project. Note that any views expressed are my own and not those of Oracle.</p>
<hr />
<h1 id="blog-posts-and-articles">Blog Posts and Articles</h1>
<ul>
<li><p><a href="deoptimizing/">Deoptimizing Ruby</a>. What deoptimization means for Ruby and how JRuby+Truffle implements and applies it.</p></li>
<li><p><a href="cext/">Very High Performance C Extensions For JRuby+Truffle</a>. How JRuby+Truffle supports C extensions.</p></li>
<li><p><a href="small-data-structures/">Optimising Small Data Structures in JRuby+Truffle</a>. Specialised optimisations for small arrays and hashes.</p></li>
<li><p><a href="pushing-pixels">Pushing Pixels with JRuby+Truffle</a>. Running real-world Ruby gems.</p></li>
<li><p><a href="set_trace_func/">Tracing With Zero Overhead in JRuby+Truffle</a>. How JRuby+Truffle implements <code>set_trace_func</code> with zero overhead, and how we use the same technique to implement debugging.</p></li>
<li><p><a href="how-method-dispatch-works-in-jruby-truffle/">How Method Dispatch Works in JRuby/Truffle</a>. How method calls work all the way from AST down to machine code.</p></li>
<li><p><a href="announcement/">A Truffle/Graal High Performance Backend for JRuby</a>. Blog post announcing the open sourcing.</p></li>
</ul>
<hr />
<h1 id="research-papers">Research Papers</h1>
<ul>
<li><p>M. Grimmer, C. Seaton, R. Schatz, T. Würthinger, H. Mössenböck. <strong>High-Performance Cross-Language Interoperability in a Multi-Language Runtime</strong>. In Proceedings of 11th Dynamic Languages Symposium (DLS).<br> <span class="smaller">(to appear - ask me for a pre-print)</span></p></li>
<li><p>B. Daloze, C. Seaton, D. Bonetta, H. Mössenböck. <strong><a href="icooolps15-safepoints/safepoints.pdf">Techniques and Applications for Guest-Language Safepoints</a></strong>. In Proceedings of the 10th Implementation, Compilation, Optimization of Object-Oriented Languages, Programs and Systems Workshop (ICOOOLPS), 2015.<br> <span class="smaller"><a href="icooolps15-safepoints/safepoints.pdf">PDF</a></span></p></li>
<li><p>F. Niephaus, M. Springer, T. Felgentreff, T. Pape, R. Hirschfeld. <strong><a href="https://github.com/HPI-SWA-Lab/TargetSpecific-ICOOOLPS/raw/gh-pages/call_target_specific_method_arguments.pdf">Call-target-specific Method Arguments</a></strong>. In Proceedings of the 10th Implementation, Compilation, Optimization of Object-Oriented Languages, Programs and Systems Workshop (ICOOOLPS), 2015.<br> <span class="smaller"><a href="https://github.com/HPI-SWA-Lab/TargetSpecific-ICOOOLPS/raw/gh-pages/call_target_specific_method_arguments.pdf">PDF</a></span></p></li>
<li><p>B. Daloze, C. Seaton, D. Bonetta, H. Mössenböck. <strong><a href="icooolps15-safepoints/safepoints.pdf">Techniques and Applications for Guest-Language Safepoints</a></strong>. In Proceedings of the 10th Implementation, Compilation, Optimization of Object-Oriented Languages, Programs and Systems Workshop (ICOOOLPS), 2015.<br> <span class="smaller"><a href="icooolps15-safepoints/safepoints.pdf">PDF</a></span></p></li>
<li><p>S. Marr, C. Seaton, S. Ducasse. <strong><a href="pldi15-metaprogramming/pldi15-marr-et-al-zero-overhead-metaprogramming.pdf">Zero-Overhead Metaprogramming: Reflection and Metaobject Protocols Fast and without Compromises</a></strong>. In Proceedings of the 36th Conference on Programming Language Design and Implementation (PLDI), 2015.<br> <span class="smaller"><a href="pldi15-metaprogramming/pldi15-marr-et-al-zero-overhead-metaprogramming.pdf">PDF</a></span></p></li>
<li><p>M. Grimmer, C. Seaton, T. Würthinger, H. Mössenböck. <strong><a href="modularity15/rubyextensions.pdf">Dynamically Composing Languages in a Modular Way: Supporting C Extensions for Dynamic Languages</a></strong>. In Proceedings of the 14th International Conference on Modularity, 2015.<br> <span class="smaller"> <a href="modularity15/rubyextensions.pdf">PDF</a> </span></p></li>
<li><p>A. Wöß, C. Wirth, D. Bonetta, C. Seaton, C. Humer, and H. Mössenböck. <strong><a href="pppj14-om/ppj14-om.pdf">An object storage model for the Truffle language implementation framework</a></strong>. In Proceedings of the International Conference on Principles and Practices of Programming on the Java Platform (PPPJ), 2014.<br> <span class="smaller"> <a href="pppj14-om/ppj14-om.pdf">PDF</a></span></p></li>
<li><p>C. Seaton, M. L. Van De Vanter, and M. Haupt. <strong><a href="http://www.lifl.fr/dyla14/papers/dyla14-3-Debugging_at_Full_Speed.pdf">Debugging at full speed</a></strong>. In Proceedings of the 8th Workshop on Dynamic Languages and Applications (DYLA), 2014.<br> <span class="smaller"> <a href="http://www.lifl.fr/dyla14/papers/dyla14-3-Debugging_at_Full_Speed.pdf">PDF</a>, <a href="http://lafo.ssw.uni-linz.ac.at/truffle/debugging/dyla14-debugging-artifact-0557a4f756d4.tar.gz">Code</a></span></p></li>
</ul>
<hr />
<h1 id="videos-of-talks-and-slide-decks">Videos of Talks and Slide Decks</h1>
<ul>
<li><p>Chris Seaton. <a href="deoptimizing/">Deoptimizing Ruby</a>. At RubyConf 2014. <a href="http://confreaks.tv/videos/rubyconf2014-deoptimizing-ruby">Video</a>, <a href="deoptimizing/deoptimizing-ruby.pdf">slides</a> and <a href="deoptimizing/">blogpost</a>.</p></li>
<li><p>Chris Seaton. <a href="ecoop14/ecoop14-ruby-truffle.pdf">Implementing Ruby Using Truffle and Graal</a>. At the European Conference on Object Oriented Programming (ECOOP) Summer School. 2014. <a href="ecoop14/ecoop14-ruby-truffle.pdf">Slides</a>.</p></li>
<li><p>Christian Wimmer and Chris Seaton. <a href="../jvmls13-one-vm/jvmls13-one-vm.pdf">One VM to Rule Them All</a>. At the JVM Language Summit. 2013. <a href="http://medianetwork.oracle.com/video/player/2623645003001">Video</a> and <a href="../jvmls13-one-vm/jvmls13-one-vm.pdf">slides</a>.</p></li>
<li><p>Charles Nutter. <a href="http://www.slideshare.net/CharlesNutter/yow-sydney-2013-beyond-jvm">Beyond JVM</a> talk at Sydney in December 2013 made some references to this work in the context of JRuby (no video yet). Also a <a href="http://www.youtube.com/watch?feature=player_detailpage&amp;v=8ZEAwWLwmfQ#t=951">video</a> of a talk with earlier details at Baruco 2013.</p></li>
<li><p>Thomas Würthinger. <a href="http://www.slideshare.net/ThomasWuerthinger/graal-truffle-ethdec2013">Graal and Truffle: One VM To Rule Them All</a> recent project overview.</p></li>
</ul>
<hr />
<h1 id="source-code">Source Code</h1>
<p>The RubyTruffle source code is available as an optional backend in the JRuby repository. Initially it was available in the OpenJDK Graal Repository, but it's since been removed to focus on JRuby.</p>
<ul>
<li><p><a href="https://github.com/jruby/jruby/tree/master/truffle/src/main/java/org/jruby/truffle">JRuby Truffle code</a></p></li>
<li><p><a href="http://hg.openjdk.java.net/graal/graal">OpenJDK Graal Repository</a></p></li>
</ul>

<hr>

<footer>
<p>Copyright © Chris Seaton 2015</p>
<p>Opinions are my own.</p>
</footer>

</article>

<script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-37318201-1']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>

</body>
</html>
